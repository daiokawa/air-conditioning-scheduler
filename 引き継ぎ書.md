# エアコンスケジューラー プロジェクト引き継ぎ書

## はじめに
このドキュメントは、air-conditioning-schedulerプロジェクトを引き継ぐ方のClaude Codeでの作業をスムーズにするための詳細な引き継ぎ書です。

## プロジェクト概要

### 基本情報
- **プロジェクト名**: air-conditioning-scheduler
- **用途**: エアコンのスケジュール管理システム
- **技術スタック**: 
  - Next.js 14.1.0 (App Router)
  - TypeScript
  - Tailwind CSS
  - Vercel (デプロイ先)

### 現在のURL
- **本番環境**: https://air-conditioning-scheduler.vercel.app/
- **GitHubリポジトリ**: https://github.com/daiokawa/air-conditioning-scheduler

## セットアップ手順

### 1. リポジトリのクローン
```bash
git clone https://github.com/daiokawa/air-conditioning-scheduler.git
cd air-conditioning-scheduler
```

### 2. 依存関係のインストール
```bash
npm install
```

### 3. ローカル開発環境の起動
```bash
npm run dev
# http://localhost:3000 でアクセス可能
```

## プロジェクト構造

```
air-conditioning-scheduler/
├── app/                    # Next.js App Router
│   ├── api/               # APIルート
│   │   ├── auth/         # 認証API
│   │   └── events/       # イベントAPI
│   ├── demo/             # デモページ
│   ├── login/            # ログインページ
│   ├── workers/          # ワーカー管理ページ
│   ├── page.tsx          # ホームページ
│   └── layout.tsx        # 共通レイアウト
├── components/            # Reactコンポーネント
├── public/               # 静的ファイル
├── .github/              # GitHub Actions設定
│   └── workflows/
│       ├── docker.yml
│       └── claude-security-review.yml
├── package.json          # 依存関係定義
├── tsconfig.json         # TypeScript設定
├── tailwind.config.js    # Tailwind CSS設定
├── vercel.json          # Vercel設定
└── deploy.sh            # デプロイスクリプト
```

## 主要なコマンド

```bash
# 開発サーバー起動
npm run dev

# プロダクションビルド
npm run build

# プロダクションサーバー起動
npm start

# リンター実行
npm run lint

# 型チェック
npm run type-check

# Vercelへのデプロイ（CLIを使用）
vercel --prod

# デプロイスクリプト使用
./deploy.sh
```

## Vercelデプロイ方法

### 新規プロジェクトとしてデプロイ
```bash
# Vercel CLIがインストールされていない場合
npm i -g vercel

# デプロイ実行
vercel --prod

# プロンプトへの回答
# - Set up and deploy? → Y
# - Which scope? → あなたのアカウントを選択
# - Link to existing project? → N（新規作成）
# - Project name? → air-conditioning-scheduler（または任意の名前）
# - In which directory is your code located? → ./
# - Want to modify settings? → N
```

### デプロイ後の設定
1. Vercelダッシュボードにアクセス
2. プロジェクトのSettings → Domainsでカスタムドメインを設定可能
3. Environment Variablesは現在使用していないが、必要に応じて追加可能

## 主要機能の説明

### 1. ホームページ (/)
- エアコンスケジュールの概要表示
- ダッシュボード機能

### 2. ログイン (/login)
- ユーザー認証機能
- セッション管理

### 3. ワーカー管理 (/workers)
- 作業者の管理
- スケジュール割り当て

### 4. デモページ (/demo)
- 機能のデモンストレーション
- テスト用のサンプルデータ表示

### 5. API エンドポイント
- `/api/auth` - 認証関連
- `/api/events` - イベント管理

## 技術的な注意点

### 1. Next.js App Router
- すべてのページコンポーネントは`app/`ディレクトリ内に配置
- Server ComponentsとClient Componentsの使い分けに注意

### 2. TypeScript
- 型定義は厳密に管理
- `npm run type-check`で型エラーをチェック

### 3. Tailwind CSS
- スタイリングはTailwindのユーティリティクラスを使用
- カスタムスタイルは最小限に

### 4. キャッシュ制御
- vercel.jsonでキャッシュを無効化設定済み（開発中のため）
- 本番運用時は見直しが必要

## GitHub Actions

### セキュリティレビュー
- `.github/workflows/claude-security-review.yml`設定済み
- PR作成時に自動的にセキュリティチェック実行
- **要設定**: GitHub Secretsに`ANTHROPIC_API_KEY`を追加

## トラブルシューティング

### macOSでの権限エラー（EACCES: permission denied）
macOSのシステムファイルへの誤ったアクセスエラーが発生した場合：

**原因**: プロジェクトがシステムディレクトリを誤って参照している

**解決方法**:
```bash
# 1. プロジェクトを安全な場所に移動
cd ~
mkdir -p Documents/projects
mv air-conditioning-scheduler Documents/projects/
cd Documents/projects/air-conditioning-scheduler

# 2. クリーンインストール
rm -rf node_modules package-lock.json .next
npm install

# 3. 開発サーバー再起動
npm run dev
```

**注意**: 
- プロジェクトはホームディレクトリ配下（~/Documents/など）に配置する
- システムディレクトリ（/Library/など）では作業しない
- `sudo`は使用しない

### ビルドエラーが発生した場合
```bash
# node_modulesを削除して再インストール
rm -rf node_modules package-lock.json
npm install
```

### Vercelデプロイエラー
- プロジェクト名は小文字、数字、ハイフンのみ使用可能
- vercel.jsonの`name`プロパティは非推奨（削除しても問題なし）

### ポート競合
```bash
# 別のポートで起動
PORT=3001 npm run dev
```

## 今後の改善提案

1. **環境変数の活用**
   - APIキーやデータベース接続情報の管理
   - `.env.local`ファイルの作成

2. **テストの追加**
   - Jestによるユニットテスト
   - Cypressによるe2eテスト

3. **CI/CDの強化**
   - GitHub Actionsでの自動テスト
   - ステージング環境の構築

4. **パフォーマンス最適化**
   - 画像の最適化
   - コード分割の改善

5. **セキュリティ強化**
   - 認証機能の強化
   - APIレート制限の実装

## 連絡事項

- 前任者: daiokawa (GitHub)
- 引き継ぎ日: 2025年8月7日
- GitHubアクセス権: kagatsume-9238に付与済み

## 参考リンク

- [Next.js公式ドキュメント](https://nextjs.org/docs)
- [Vercel公式ドキュメント](https://vercel.com/docs)
- [Tailwind CSS公式ドキュメント](https://tailwindcss.com/docs)
- [TypeScript公式ドキュメント](https://www.typescriptlang.org/docs/)

---

このプロジェクトは現在開発中です。不明な点がありましたら、GitHubのIssueで質問してください。
引き継ぎ後は、このプロジェクトを自由に改善・拡張してください。

頑張ってください！🚀